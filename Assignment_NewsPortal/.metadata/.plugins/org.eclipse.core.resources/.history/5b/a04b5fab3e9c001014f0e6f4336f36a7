<%@ page contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>

<%@ include file="layout/header.jsp" %>

<main class="container grid">

  <!-- ====== Tin Trang Nhất (Home = true) ====== -->
  <section class="content">
    <h1>Trang nhất</h1>
    <div class="list-posts">
      <c:choose>
        <c:when test="${not empty homeList}">
          <c:forEach var="n" items="${homeList}">
            <article class="card">
              <a href="${pageContext.request.contextPath}/news/${n.id}">
                <c:choose>
                  <c:when test="${not empty n.image}">
                    <img src="${pageContext.request.contextPath}/assets/img/${n.image}" alt="${n.title}">
                  </c:when>
                  <c:otherwise>
                    <img src="${pageContext.request.contextPath}/assets/img/sample.jpg" alt="${n.title}">
                  </c:otherwise>
                </c:choose>
              </a>
              <h2><a href="${pageContext.request.contextPath}/news/${n.id}">${n.title}</a></h2>
              <p class="meta">Lượt xem: ${n.viewCount}</p>
            </article>
          </c:forEach>
        </c:when>
        <c:otherwise>
          <p>Chưa có bài nào được đặt Trang nhất.</p>
        </c:otherwise>
      </c:choose>
    </div>
  </section>

  <!-- ====== Top 5 Hot ====== -->
  <section class="content">
    <h2>Top 5 hot</h2>
    <ul class="list">
      <c:choose>
        <c:when test="${not empty hotList}">
          <c:forEach var="n" items="${hotList}">
            <li>
              <a href="${pageContext.request.contextPath}/news/${n.id}">${n.title}</a>
              <small> — ${n.viewCount} lượt xem</small>
            </li>
          </c:forEach>
        </c:when>
        <c:otherwise><li>Chưa có dữ liệu.</li></c:otherwise>
      </c:choose>
    </ul>
  </section>

  <!-- ====== Top 5 Mới ====== -->
  <section class="content">
    <h2>Top 5 mới</h2>
    <ul class="list">
      <c:choose>
        <c:when test="${not empty newList}">
          <c:forEach var="n" items="${newList}">
            <li><a href="${pageContext.request.contextPath}/news/${n.id}">${n.title}</a></li>
          </c:forEach>
        </c:when>
        <c:otherwise><li>Chưa có dữ liệu.</li></c:otherwise>
      </c:choose>
    </ul>
  </section>

  <!-- ====== Đã xem gần đây (từ cookie) ====== -->
  <section class="content">
    <h2>Đã xem gần đây</h2>
    <ul class="list">
      <c:choose>
        <c:when test="${not empty recentList}">
          <c:forEach var="n" items="${recentList}">
            <li><a href="${pageContext.request.contextPath}/news/${n.id}">${n.title}</a></li>
          </c:forEach>
        </c:when>
        <c:otherwise><li>Chưa có lịch sử xem.</li></c:otherwise>
      </c:choose>
    </ul>
  </section>

  <!-- ====== Sidebar: danh mục (nếu bạn muốn hiện ở đây) ====== -->
  <aside class="sidebar">
    <h3>Chuyên mục</h3>
    <ul>
      <c:forEach var="cata" items="${categories}">
        <li>
          <a href="${pageContext.request.contextPath}/category?id=${cata.id}">
            ${cata.name}
          </a>
        </li>
      </c:forEach>
    </ul>
  </aside>

</main>

<%@ include file="layout/footer.jsp" %>
